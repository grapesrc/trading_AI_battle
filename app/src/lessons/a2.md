# レッスン2: 移動平均線を作ろう

今回は、価格のリストデータから、トレーダーが使う重要な指標「移動平均線」を自分たちの手で計算する方法を学びます。

---

# ステップ1: 価格の履歴を取得する

移動平均を計算するには、過去の価格データが必要です。価格を定期的に取得して、リストを作ります。

![Price History Block](https://drive.google.com/thumbnail?id=1-dummy-price-history-block-image)

---

# ステップ2: リストを操作する

「価格履歴」ブロックが返すのは、`[101, 102, 100, 103, ...]` のような数値のリストです。Blocklyには、このリストを操作するためのブロックが用意されています。

- **リストの長さを取得**: リストにいくつのデータが含まれているか調べます。
- **リストからN番目を取得**: リストの特定の位置にあるデータを取り出します。

![List Blocks](https://drive.google.com/thumbnail?id=1-dummy-list-operations-block-image)

---

# ステップ3: 移動平均を計算する

移動平均は、「ある期間の価格の合計 ÷ その期間」で計算できます。
例えば、期間5の移動平均を計算する手順は以下のようになります。

1.  ループブロックを使い、価格リストの最後の5個のデータを順番に取り出す。
2.  取り出した価格を、合計を保存するための変数に足していく。
3.  ループが終わったら、合計を保存した変数を「5」で割る。

![MA Calculation Logic](https://drive.google.com/thumbnail?id=1-dummy-ma-calculation-block-image)

---

# 課題

これまで学んだリスト操作と計算ブロックを駆使して、以下のロジックを持つ取引ボットを完成させましょう。

1.  期間「5」の短期移動平均を計算する。
3.  **もし短期移動平均が長期移動平均を上回ったら**、1枚買う。
4.  **もし短期移動平均が長期移動平均を下回ったら**、1枚売る。

この処理を1秒おきに繰り返しましょう。